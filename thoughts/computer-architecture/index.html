<!DOCTYPE html>
<html lang="en">



<head>
  
  <meta charset="UTF-8" />
  <meta
    name="description"
    content="A lot of content courtesy of cpu.land written by the wonderful Kognise!
CPUs The central processing unit (CPU) of a computer is in charge of all computation."
  />
  <meta property="og:title" content="Computer Architecture">
  <meta property="og:description" content="A lot of content courtesy of cpu.land written by the wonderful Kognise!
CPUs The central processing unit (CPU) of a computer is in charge of all computation.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://jzhao.xyz/thoughts/computer-architecture/">
  <meta property="og:width" content="200">
  <meta property="og:height" content="200">
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Computer Architecture" />
  <meta name="twitter:description" content="A lot of content courtesy of cpu.land written by the wonderful Kognise!
CPUs The central processing unit (CPU) of a computer is in charge of all computation." />
  <meta name="twitter:image" content="https://jzhao.xyz/icon.png">
  
    
      
      <meta name="twitter:site" content="_jzhao" />
    
  
    
  

  <title>
    Computer Architecture
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  
  <meta property="og:url" content="https://jzhao.xyz" />
  <meta property="og:title" content="" />
  <meta property="og:description" content="" />
  <meta property="og:image" content="https://jzhao.xyz/res/og-card.png" />
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:creator" content="@_jzhao">
  <meta name="twitter:title" content="">
  <meta name="twitter:description" content="" />
  <meta name="twitter:image" content="https://jzhao.xyz/res/og-card.png" />


  
  
  
  
  
  <link rel="shortcut icon" type="image/png"  href="https://jzhao.xyz//icon.png" />
  

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <link href="https://jzhao.xyz/styles.5e1774000635aee9f863ca2684871247.min.css" rel="stylesheet" />

  
  <link href="https://jzhao.xyz/styles/_light_syntax.32359fa0e4ad5c5b354cb209e7fa1b22.min.css" rel="stylesheet" id="theme-link">

   
  
  
  
  
  <script src="https://jzhao.xyz/js/darkmode.182a2b4c9451f6f751c276a71c985624.min.js"></script>
  
  
  
  <script src="https://jzhao.xyz/js/util.763a7adef953af01d5a19b4d3dbd3455.min.js"></script>
  
  
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css" as="style"
      onload="this.onload=null;this.rel='stylesheet'"
      integrity="sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"
        integrity="sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx"
        crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js"
        integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR"
        crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js"
        integrity="sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A"
        crossorigin="anonymous"></script>


  
  



  <script src="https://cdn.jsdelivr.net/npm/@floating-ui/core@1.2.1"></script>
  <script src="https://cdn.jsdelivr.net/npm/@floating-ui/dom@1.2.1"></script>
  
  <script defer src="https://jzhao.xyz/js/popover.aa9bc99c7c38d3ae9538f218f1416adb.min.js"></script>

  
  
  
  <script defer src="https://jzhao.xyz/js/code-title.ce4a43f09239a9efb48fee342e8ef2df.min.js"></script>
  

  
  
  <script defer src="https://jzhao.xyz/js/clipboard.2913da76d3cb21c5deaa4bae7da38c9f.min.js"></script>
  

  

  
   
  <script>
    
    const isReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches
    const lastVisit = localStorage.getItem('lastVisitTime')
    const now = Date.now()
    let show = 'true'
    if (lastVisit) {
      document.documentElement.setAttribute('visited', 'true')
      const minElapsed = Math.ceil((now - parseInt(lastVisit)) / (1000 * 60))
      show = (!isReducedMotion && minElapsed > 5) ? 'true' : 'false'
    }
    document.documentElement.setAttribute('show-animation', show)
    localStorage.setItem('lastVisitTime', `${now}`)

    const SEARCH_ENABLED =  false 
    const LATEX_ENABLED =  true 
    const PRODUCTION =  true 
    const BASE_URL = "https://jzhao.xyz/"
    const fetchData = Promise.all([
          fetch("https:\/\/jzhao.xyz\/indices\/linkIndex.0c8a634c341de52f9843ac05f7c42aa1.min.json")
            .then(data => data.json())
            .then(data => ({
              index: data.index,
              links: data.links,
            })),
          fetch("https:\/\/jzhao.xyz\/indices\/contentIndex.271405773442d1d0cddf24dc0f422236.min.json")
            .then(data => data.json()),
        ])
        .then(([{index, links}, content]) => ({
          index,
          links,
          content,
        }))

      const render = () => {
      

      const siteBaseURL = new URL(BASE_URL);
      const pathBase = siteBaseURL.pathname;
      const pathWindow = window.location.pathname;
      const isHome = pathBase == pathWindow;

      addCopyButtons();
      

      addTitleToCodeBlocks();
      

      

      
      initPopover(
        "https://jzhao.xyz",
         true 

      )
      

      
      const footer = document.getElementById("footer")
      if (footer) {
        const container = document.getElementById("graph-container")
        
        if (!container) return requestAnimationFrame(render)
        
        container.textContent = ""

        const drawGlobal = isHome &&  false ;
        drawGraph(
            "https://jzhao.xyz",
            drawGlobal,
            [{"/moc":"#4388cc"}],
            drawGlobal ? {"centerForce":1,"depth":-1,"enableDrag":true,"enableLegend":false,"enableZoom":true,"fontSize":0.5,"linkDistance":1,"opacityScale":3,"repelForce":1,"scale":1.4} : {"centerForce":1,"depth":1,"enableDrag":true,"enableLegend":false,"enableZoom":true,"fontSize":0.6,"linkDistance":0.8,"opacityScale":3,"repelForce":2,"scale":1}
          );

        }
      

      
        var els = document.getElementsByClassName("mermaid");
        if (els.length > 0) {
          import('https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs').then(
            (obj) => {
              
              
              obj.default.init();
            }
          )
        }
      
      
      
      function clickHandler(evt) {
        const target = evt.target 
        const classNames = target.className.split(" ")
        const broken = classNames.includes("broken")
        const internal = classNames.includes("internal-link")
        plausible("Link Click", {
          props: {
            href: target.href,
            broken,
            internal,
            graph: false,
          }
        })
      }

      const links = document.querySelectorAll("a")
      for (link of links) {
        if (link.className.includes("root-title")) {
          link.addEventListener('click', clickHandler, {once: true})
        }
      }
    }

    const init = (doc = document) => {
      
      addCopyButtons();
      

      addTitleToCodeBlocks();
      renderMathInElement(doc.body, {
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false},
        ],
        macros: {
          '’': "'"
        },
        throwOnError : false
      });
      
    };
  </script>
  
  
  <script type="module">
    import { attachSPARouting } from "https:\/\/jzhao.xyz\/js\/router.d6fe6bd821db9ea97f9aeefae814d8e7.min.js"
    attachSPARouting(init, render)
  </script>
  
  
  <script defer data-domain="jzhao.xyz" src="https://plausible.io/js/script.js"></script>
  <script>window.plausible = window.plausible || function() { (window.plausible.q = window.plausible.q || []).push(arguments) }</script>
</head>


<body>
<div id="search-container">
  <div id="search-space">
    <input autocomplete="off" id="search-bar" name="search" type="text" aria-label="Search"
      placeholder="Search for something..." dir="">
    <div id="results-container">
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js"
  integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin="anonymous" defer></script>

<script defer src="https://jzhao.xyz/js/full-text-search.e6e2e0c213187ca0c703d6e2c7a77fcd.min.js"></script>



<div id="cursor-chat-layer">
  <input type="text" id="cursor-chat-box">
</div>
<script type="module">
  import { initCursorChat } from 'https://esm.sh/cursor-chat'
  initCursorChat("jacky-personal-website")
</script>

<div class="singlePage">
    
    <header class="delay t-1">
    <h1 id="page-title"><a class="root-title" href="https://jzhao.xyz/">jzhao.xyz</a></h1>
    <div class="spacer"></div>
    <div id="search-icon">
      <p>Search</p>
      <svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg>
    </div>
    <div class='darkmode'>
    <input class='toggle' id='darkmode-toggle' type='checkbox' tabindex="-1">
    <label id="toggle-label-light" for='darkmode-toggle' tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35;" xml:space="preserve">
            <title>Light Mode</title>
            <path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z" />
        </svg>
    </label>
    <label id="toggle-label-dark" for='darkmode-toggle' tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'" xml:space="preserve">
            <title>Dark Mode</title>
            <path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z" />
        </svg>
    </label>
</div>

</header>


    <article>
      <h1>Computer Architecture</h1>
      <p class="meta">
        Last updated 
Aug 10, 2023

 
          
<a href="https://github.com/jackyzha0/quartz/tree/hugo/content/thoughts/computer%20architecture.md" rel="noopener">Edit Source</a>


      </p>
      <ul class="tags">
    
    <li><a href="https://jzhao.xyz/tags/seed/">Seed</a></li>
    
</ul>

      


      














  
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  

    
    
    
    
    
    

    
    
    
    
    
    
    
    

    
    
    
    
    
    
    
    

    
    
      
      
      
      
      
    
    

  

  
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  

    
    
    
    
    
    

    
    
    
    
    
    
    
    

    
    
    
    
    
      
      
    
    
    
      
      
      
      
      
      
      
    
    

    
    
      
      
      
      
      
      
        
        
        
          
          
          
        
        
      
    
    

  

  
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  

    
    
    
    
    
    

    
    
    
    
    
    
    
    

    
    
    
    
    
    
    
    

    
    
      
      
      
      
      
    
    

  

  
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  

    
    
    
    
    
    

    
    
    
    
    
    
    
    

    
    
    
    
    
    
    
    

    
    
      
      
      
      
      
    
    

  












<p>A lot of content courtesy of 
<a href="https://cpu.land/the-basics" rel="noopener">cpu.land</a> written by the wonderful 
<a href="https://cpu.land/the-basics" rel="noopener">Kognise</a>!</p>
<a href="#cpus"><h2 id="cpus"><span class="hanchor" ariaLabel="Anchor"># </span>CPUs</h2></a>
<p>The <em>central processing unit</em> (CPU) of a computer is in charge of all computation.</p>
<p>It works by taking a list of instructions and executing them one-by-one. After executing each instruction, the CPU moves the pointer and repeats.</p>
<p>An instruction is made up of a bunch of binary data that looks like this in descending levels of abstraction:</p>
<ul>
<li><code>add ebx, 10</code> (Assembly)</li>
<li><code>0x83 0xC3 0x0A</code> (Machine Code - hex)</li>
<li><code>10000011 11000011 00001010</code> (Machine Code - binary)</li>
</ul>
<p>Generally, the first byte (<code>0x83</code>) in the example above, corresponds to the opcode which represents that actual operation and the rest of the bytes are the arguments.</p>
<p>The CPU stores an <em>instruction pointer</em> (called the program counter) which points to the location in memory where it’s going to fetch the next instruction. Most instructions, after they are executing, just move the instruction pointer to the very next instruction, but some instructions (like the <code>jmp</code> instruction) can jump to different places depending on certain conditions (e.g. a value in a specific register or whether one value is positive or negative).</p>
<a href="#registers-and-memory"><h2 id="registers-and-memory"><span class="hanchor" ariaLabel="Anchor"># </span>Registers and Memory</h2></a>
<p>Registers are small storage buckets that are extremely fast for the CPU to read and write from. These are often very limited (most CPUs only have a handful) so your computer also has various other levels of storage in the form of memory that get progressively slower but higher capacity the more you move away from the CPU.</p>
<p>See also: <a href="/thoughts/systems-design#latency-numbers" rel="noopener" class="internal-link" data-src="/thoughts/systems-design">latency numbers for various levels of memory access</a>.</p>
<p>Roughly:</p>
<ul>
<li>Register read/write: ~0.1ns latency and ~16 bits of capacity</li>
<li>L1 cache: ~0.5ns latency and ~32KB of capacity</li>
<li>L2 cache: ~7ns latency and ~4MB of capacity</li>
<li>Main memory (RAM): ~100ns latency and ~8GB of capacity</li>
</ul>
<a href="#isolating-memory"><h3 id="isolating-memory"><span class="hanchor" ariaLabel="Anchor"># </span>Isolating memory</h3></a>
<p>It turns out that when the CPU reads from or writes to a memory address, it’s not actually referring to that location in <em>physical</em> memory (RAM). Rather, it’s pointing to a location in <em>virtual</em> memory space.</p>
<p>The CPU talks to a chip called a memory management unit (MMU). The MMU works like a translator with a dictionary that translates locations in virtual memory to locations in RAM.</p>
<p>When the computer first boots up, memory accesses go directly to physical RAM. Immediately after startup, the OS creates the translation dictionary (called the <em>page table</em>) and tells the CPU to start using the MMU.</p>
<p>These pages are always a fixed size and each processor architecture has a different page size. x86-64, for example, has a default 4 KiB page size.</p>
<p>This is how each process can have its own isolated memory space — when the OS switches context from one process to another, an important task is remapping the virtual memory space to a different area in physical memory and allows code and data that refer to memory addresses use the <em>same addresses</em> that get remapped to different physical memory locations.</p>
<p>Page tables are often hierarchical:</p>
<p><img src="/thoughts/images/hierarchical-page-table.png" width="auto" /></p>
<p>If an instruction for example asks for an address that the MMU doesn&rsquo;t know about, it can fail the memory access with a page fault. Then, the page fault interrupt handler can then load the data into memory and let the MMU try again.</p>
<p>This is also what the swap or page file is actually doing under the hood: Operating systems can free up physical memory by writing memory pages to disk and then removing them from physical memory but keeping them in virtual memory with the present flag set to 0. If that virtual memory is read, the OS can then restore the memory from disk to RAM and set the present flag back to 1.</p>
<a href="#kernel"><h2 id="kernel"><span class="hanchor" ariaLabel="Anchor"># </span>Kernel</h2></a>
<p>The kernel is the core of the operating system. When you boot up your computer, the instruction pointer starts at a program somewhere. That program is the kernel. The kernel has near-full access to your computer’s memory, peripherals, and other resources, and is in charge of running software installed on your computer (known as userland programs).</p>
<a href="#processor-mode"><h3 id="processor-mode"><span class="hanchor" ariaLabel="Anchor"># </span>Processor Mode</h3></a>
<p>The <em>mode</em> (sometimes called privilege level or ring) a processor is in controls what it’s allowed to do.</p>
<ul>
<li>Kernel mode: CPU can do anything and access any memory</li>
<li>User mode: only subset of instructions are allowed and memory is limited (this is also why you get segmentation faults if you try to read outside of your allowed memory space!)</li>
</ul>
<p>Processors start in kernel mode. Before executing a program, the kernel initiates the switch to user mode.</p>
<a href="#syscalls"><h3 id="syscalls"><span class="hanchor" ariaLabel="Anchor"># </span>Syscalls</h3></a>
<p>Programs run in user mode because they can’t be trusted with full access to the computer. But programs also need a way to do privileged things like access I/O, allocate memory, etc.</p>
<p>A system call is a special procedure that lets a program start a transition from user space to kernel space, jumping from the program’s code into OS code.</p>
<a href="#interrupts"><h3 id="interrupts"><span class="hanchor" ariaLabel="Anchor"># </span>Interrupts</h3></a>
<p>When the processor receives an interrupt signal <code>INT</code>, it drops everything it is currently doing and handles the interrupt. Every software interrupt signal is associated with a particular interrupt handler in the interrupt vector table (or IVT).</p>
<p>Some <a href="#syscalls" rel="noopener" class="internal-link" data-src="">syscalls</a> take arguments. These arguments are normally passed by placing data in certain registers.</p>
<p>After the kernel finishes handling the interrupt, it uses an instruction <code>IRET</code> to return back to the instruction pointer it was at before it got interrupted.</p>
<a href="#multitasking-and-parallelism"><h2 id="multitasking-and-parallelism"><span class="hanchor" ariaLabel="Anchor"># </span>Multitasking and Parallelism</h2></a>
<p>We can fake parallelism by letting processes take turns on the CPU.</p>
<p>We can do this by programming a timer chip to trigger a switch to an OS <a href="#interrupts" rel="noopener" class="internal-link" data-src="">interupt</a> handler after a certain amount of time passes.</p>
<p>OS schedulers use <em>timer chips</em> like 
<a href="https://en.wikipedia.org/wiki/Programmable_interval_timer" rel="noopener">PITs</a> to trigger hardware interrupts for multitasking:</p>
<ol>
<li>Before jumping to program code, the OS sets the timer chip to trigger an interrupt after some period of time (this period of time is called the <em>timeslice</em>)</li>
<li>The OS switches to user mode and jumps to the next instruction of the program and the program does its thing</li>
<li>When the timer elapses, it triggers a hardware interrupt to switch to kernel mode and jump back to OS code</li>
<li>The OS can now save where the program left off, load a different program, and repeat the process</li>
</ol>
<p>This is called <em>preemptive multitasking</em>; the interruption of a process is called 
<a href="https://en.wikipedia.org/wiki/Preemption_%28computing%29" rel="noopener"><em>preemption</em></a>.</p>
<p>There are a few strategies to determine the timeslice that each process gets:</p>
<ol>
<li>Fixed timeslice round-robin: every process gets the same timeslice (e.g. 10ms)</li>
<li>Dynamic timeslice round-robin: divide a target latency equally among all processes (e.g. with a target latency of 15 ms and 10 processes, each process would get 15/10 or 1.5 ms to run). Note: too small a timeslice can result in performance problems with processes switching too rapidly. Timeslice duration can be given a lower bound (minimum granularity)</li>
<li>
<a href="https://docs.kernel.org/scheduler/sched-design-CFS.html" rel="noopener">Completely Fair Scheduler</a></li>
</ol>
<a href="#elfs"><h2 id="elfs"><span class="hanchor" ariaLabel="Anchor"># </span>ELFs</h2></a>
<p>Executable and linkable format. The structure is roughly as follows:</p>
<ul>
<li>ELF Header: basic information and where&rsquo;s what (like the PHT and SHT). Also points to where the &rsquo;entrypoint&rsquo; is.</li>
<li>Program Header Table (PHT): series of entries that describes how and where to load the ELF file&rsquo;s data into memory. Common header types:
<ul>
<li><code>PT_LOAD</code>: load into memory</li>
<li><code>PT_NOTE</code>: free form informational text (i.e. copyright notices, version info, etc.)</li>
<li><code>PT_DYNAMIC</code>: info about dynamic linking</li>
<li><code>PT_INTERP</code>: path to the location of an &lsquo;ELF interpreter&rsquo;</li>
</ul>
</li>
<li>Section Header Table (SHT): optional map of the data to assist in debugging. Common sections are:
<ul>
<li><code>.text</code>: machine code</li>
<li><code>.data</code>: hard coded data (e.g. global variable, statics, embedded binaries/images/other things)</li>
<li><code>.rodata</code>: read-only <code>.data</code></li>
</ul>
</li>
<li>Data: all of the actual code and data packed together.</li>
</ul>
<a href="#linking"><h3 id="linking"><span class="hanchor" ariaLabel="Anchor"># </span>Linking</h3></a>
<p>Programmers tend to build their programs on top of libraries of reusable code — for example, <code>libc</code>, which we talked about earlier.</p>
<ul>
<li>Static linking: library functions are copied from the developer&rsquo;s computer into each binary at <strong>build time</strong></li>
<li>Dynamic linking: binaries reference the names of library functions which are loaded from the user&rsquo;s computer at <strong>runtime</strong> (these are typicaly packaged into files with <code>.so</code>, <code>.dll</code> or <code>.dylib</code> file extensions)</li>
</ul>


    </article>
    <hr/>


<div class="page-end" id="footer">
    <div class="backlinks-container">
        <h3>Backlinks</h3>
<ul class="backlinks">
    
    
    
    
    
    
    
    
    
      
      
      
    
      
      
      
    
      
      
      <li>
        <a href="/thoughts/Unix/" data-ctx="computer architecture" data-src="/thoughts/Unix" class="internal-link">Unix</a>
      </li>
      
      
      
      <li>
        <a href="/thoughts/compiler/" data-ctx="machine" data-src="/thoughts/compiler" class="internal-link">Compilers</a>
      </li>
      
      
      
</ul>

    </div>
    <div>
        <script
  src="https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js"
  integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI="
  crossorigin="anonymous"
></script>
<h3>Interactive Graph</h3>
<div id="graph-container"></div>
<style>
  :root {
    --g-node: var(--secondary);
    --g-node-active: var(--primary);
    --g-node-inactive: var(--visited);
    --g-link: var(--outlinegray);
    --g-link-active: #5a7282;
  }
</style>

<script src="https://jzhao.xyz/js/graph.6579af7b10c818dbd2ca038702db0224.js"></script>

    </div>
</div>






<div id="contact_buttons">
    <footer>
        
        
        <p>This page was made by Jacky Zhao using <a href="https://github.com/jackyzha0/quartz">Quartz</a>, © 2023</p>
        <ul>
            
            <li><a href="https://jzhao.xyz/">Home</a></li>
            <li><a href="https://twitter.com/_jzhao">Twitter</a></li><li><a href="https://github.com/jackyzha0">GitHub</a></li></ul>
    </footer>
</div>


</div>
</body>
</html>
